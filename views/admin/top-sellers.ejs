<%- include('../layouts/admin/header.ejs') %>

    <body class="g-sidenav-show bg-gray-200">
        <aside
            class="sidenav navbar navbar-vertical navbar-expand-xs border-0 border-radius-xl my-3 fixed-start ms-3 bg-gradient-dark"
            id="sidenav-main">
            <div class="sidenav-header" style="margin: 15px;">
                <i class="fas fa-times p-3 cursor-pointer text-white opacity-5 position-absolute end-0 top-0 d-none d-xl-none"
                    aria-hidden="true" id="iconSidenav"></i>
                <a class="navbar-brand m-0" href="/">
                    <img src="/public/assets/images/icons/sacecart-01 1.png" class="navbar-brand-img h-100"
                        alt="main_logo">
                    <span class="ms-1 font-weight-bold text-white"></span>
                </a>
            </div>
            <hr class="horizontal light mt-0 mb-2">
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link" href="/admin/home">
                        <div class="text-white text-center me-2 d-flex align-items-center justify-content-center">
                            <i class="material-icons opacity-10">dashboard</i>
                        </div>
                        <span class="nav-link-text ms-1">Dashboard</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link text-white active bg-gradient-primary" href="/admin/top-sellers">
                        <div class="text-white text-center me-2 d-flex align-items-center justify-content-center">
                            <i class="material-icons opacity-10">category</i>
                        </div>
                        <span class="nav-link-text ms-1">Best-Selling</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link text-white" href="/admin/sales-report">
                        <div class="text-white text-center me-2 d-flex align-items-center justify-content-center">
                            <i class="material-icons opacity-10">bar_chart</i>
                        </div>
                        <span class="nav-link-text ms-1">Sales Report</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link text-white" href="/admin/view-users">
                        <div class="text-white text-center me-2 d-flex align-items-center justify-content-center">
                            <i class="material-icons opacity-10">group</i>
                        </div>
                        <span class="nav-link-text ms-1">Users</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link text-white" href="/admin/view-category">
                        <div class="text-white text-center me-2 d-flex align-items-center justify-content-center">
                            <i class="material-icons opacity-10">inventory_2</i>
                        </div>
                        <span class="nav-link-text ms-1">Category</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link text-white" href="/admin/view-product">
                        <div class="text-white text-center me-2 d-flex align-items-center justify-content-center">
                            <i class="material-icons opacity-10">branding_watermark</i>
                        </div>
                        <span class="nav-link-text ms-1">Products</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link text-white" href="/admin/view-orders">
                        <div class="text-white text-center me-2 d-flex align-items-center justify-content-center">
                            <i class="material-icons opacity-10">wysiwyg</i>
                        </div>
                        <span class="nav-link-text ms-1">Orders</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link text-white" href="/admin/view-coupon">
                        <div class="text-white text-center me-2 d-flex align-items-center justify-content-center">
                            <i class="material-icons opacity-10">redeem</i>
                        </div>
                        <span class="nav-link-text ms-1">Coupon</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link text-white" href="/admin/view-offers">
                        <div class="text-white text-center me-2 d-flex align-items-center justify-content-center">
                            <i class="material-icons opacity-10">local_offer</i>
                        </div>
                        <span class="nav-link-text ms-1">Offers</span>
                    </a>
                </li>
                <li class="nav-item mt-3">
                    <h6 class="ps-4 ms-2 text-uppercase text-xs text-white font-weight-bolder opacity-8">Account pages
                    </h6>
                </li>
                <li class="nav-item">
                    <a class="nav-link text-white " href="./pages/profile.html">
                        <div class="text-white text-center me-2 d-flex align-items-center justify-content-center">
                            <i class="material-icons opacity-10">person</i>
                        </div>
                        <span class="nav-link-text ms-1">Profile</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link text-white " href="/admin/logout">
                        <div class="text-white text-center me-2 d-flex align-items-center justify-content-center">
                            <i class="material-icons opacity-10">logout</i>
                        </div>
                        <span class="nav-link-text ms-1">Log out</span>
                    </a>
                </li>
            </ul>
        </aside>
        <main class="main-content position-relative max-height-vh-100 h-100 border-radius-lg">
            <div class="container-fluid py-4">
                <div class="row">
                    <!-- Table for Top Selling Products -->
                    <div class="col-12">
                        <div class="card my-4">
                            <div class="card-header p-0 position-relative mt-n4 mx-3 z-index-2">
                                <div class="bg-gradient-primary shadow-primary border-radius-lg">
                                    <div class="row justify-content-lg-between align-items-center margin-0 py-0">
                                        <div class="col-md-12 col-lg-6 mb-2 mb-lg-0">
                                            <h6 class="text-white text-capitalize ps-3">
                                                <%= message %> - Top Selling Products
                                            </h6>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="card-body px-0 pb-2">
                                <div class="table-responsive p-3">
                                    <h2 class="mb-4">Top Best-Selling Products</h2>
                                    <table class="table align-items-center mb-0">
                                        <thead>
                                            <tr>
                                                <th
                                                    class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">
                                                    Product Image</th>
                                                <th
                                                    class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">
                                                    Product Name</th>
                                                <th
                                                    class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7 ps-2">
                                                    Total Quantity Sold</th>
                                                <th
                                                    class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7 ps-2">
                                                    Total Sales (&#8377;)</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <% products.forEach((product, index)=> { %>
                                                <tr>
                                                    <td style="position: relative;">
                                                        <img src="/public/userImages/<%= product.productImage[0] %>"
                                                            alt="<%= product.productName %>"
                                                            class="img-fluid img-thumbnail"
                                                            style="width: 50px; height: 50px; object-fit: cover;">
                                                        <% if (index===0) { %>
                                                            <i class="fas fa-medal"
                                                                style="position: absolute; top: 0; left: 0; color: gold; font-size: 20px;"></i>
                                                            <% } else if (index===1) { %>
                                                                <i class="fas fa-medal"
                                                                    style="position: absolute; top: 0; left: 0; color: silver; font-size: 20px;"></i>
                                                                <% } else if (index===2) { %>
                                                                    <i class="fas fa-medal"
                                                                        style="position: absolute; top: 0; left: 0; color: bronze; font-size: 20px;"></i>
                                                                    <% } %>
                                                    </td>
                                                    <td>
                                                        <%= product.productName %>
                                                    </td>
                                                    <td>
                                                        <%= product.totalQuantity %>
                                                    </td>
                                                    <td>&#8377;<%= product.totalSales.toFixed(2) %>
                                                    </td>
                                                </tr>
                                                <% }) %>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Table for Top Selling Categories -->
                    <div class="col-12">
                        <div class="card my-4">
                            <div class="card-header p-0 position-relative mt-n4 mx-3 z-index-2">
                                <div class="bg-gradient-primary shadow-primary border-radius-lg">
                                    <div class="row justify-content-lg-between align-items-center margin-0 py-0">
                                        <div class="col-md-12 col-lg-6 mb-2 mb-lg-0">
                                            <h6 class="text-white text-capitalize ps-3">
                                                Top Selling Categories
                                            </h6>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="card-body px-0 pb-2">
                                <div class="table-responsive p-3">
                                    <h2 class="mb-4">Top Best-Selling Categories</h2>
                                    <table class="table align-items-center mb-0">
                                        <thead>
                                            <tr>
                                                <th
                                                    class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">
                                                    Category Image</th>
                                                <th
                                                    class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">
                                                    Category Name</th>
                                                <th
                                                    class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7 ps-2">
                                                    Total Quantity Sold</th>
                                                <th
                                                    class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7 ps-2">
                                                    Total Sales (&#8377;)</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <% categories.forEach((category, index)=> { %>
                                                <tr>
                                                    <td style="position: relative;">
                                                        <img src="/public/userImages/<%= category.categoryImage %>"
                                                            alt="<%= category.categoryName %>"
                                                            class="img-fluid img-thumbnail"
                                                            style="width: 50px; height: 50px; object-fit: cover;">

                                                        <% if (index===0) { %>
                                                            <i class="fas fa-medal"
                                                                style="position: absolute; top: 0; left: 0; color: gold; font-size: 20px;"></i>
                                                            <% } else if (index===1) { %>
                                                                <i class="fas fa-medal"
                                                                    style="position: absolute; top: 0; left: 0; color: silver; font-size: 20px;"></i>
                                                                <% } else if (index===2) { %>
                                                                    <i class="fas fa-medal"
                                                                        style="position: absolute; top: 0; left: 0; color: bronze; font-size: 20px;"></i>
                                                                    <% } %>
                                                    </td>
                                                    <td>
                                                        <%= category.categoryName %>
                                                    </td>
                                                    <td>
                                                        <%= category.totalQuantity %>
                                                    </td>
                                                    <td>&#8377;<%= category.totalSales.toFixed(2) %>
                                                    </td>
                                                </tr>
                                                <% }) %>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>


                    <!-- Table for Top Selling Brands -->
                    <div class="col-12">
                        <div class="card my-4">
                            <div class="card-header p-0 position-relative mt-n4 mx-3 z-index-2">
                                <div class="bg-gradient-primary shadow-primary border-radius-lg">
                                    <div class="row justify-content-lg-between align-items-center margin-0 py-0">
                                        <div class="col-md-12 col-lg-6 mb-2 mb-lg-0">
                                            <h6 class="text-white text-capitalize ps-3">
                                                Top Selling Brands
                                            </h6>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="card-body px-0 pb-2">
                                <div class="table-responsive p-3">
                                    <h2 class="mb-4">Top Best-Selling Brands</h2>
                                    <table class="table align-items-center mb-0">
                                        <thead>
                                            <tr>
                                                <th
                                                    class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">
                                                    Brand Image</th>
                                                <th
                                                    class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">
                                                    Brand Name</th>
                                                <th
                                                    class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7 ps-2">
                                                    Total Quantity Sold</th>
                                                <th
                                                    class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7 ps-2">
                                                    Total Sales (&#8377;)</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <% brands.forEach((brand, index)=> { %>
                                                <tr>
                                                    <td style="position: relative;">
                                                        <img src="/public/userImages/<%= brand.brandImage %>"
                                                            alt="<%= brand.brandName %>" class="img-fluid img-thumbnail"
                                                            style="width: 50px; height: 50px; object-fit: cover;">
                                                        <% if (index===0) { %>
                                                            <i class="fas fa-medal"
                                                                style="position: absolute; top: 0; left: 0; color: gold; font-size: 20px;"></i>
                                                            <% } else if (index===1) { %>
                                                                <i class="fas fa-medal"
                                                                    style="position: absolute; top: 0; left: 0; color: silver; font-size: 20px;"></i>
                                                                <% } else if (index===2) { %>
                                                                    <i class="fas fa-medal"
                                                                        style="position: absolute; top: 0; left: 0; color: bronze; font-size: 20px;"></i>
                                                                    <% } %>
                                                    </td>
                                                    <td>
                                                        <%= brand.brandName %>
                                                    </td>
                                                    <td>
                                                        <%= brand.totalQuantity %>
                                                    </td>
                                                    <td>&#8377;<%= brand.totalSales.toFixed(2) %>
                                                    </td>
                                                </tr>
                                                <% }) %>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>


                </div>
            </div>

            <%- include('../layouts/admin/footer.ejs') %>
        </main>
    </body>